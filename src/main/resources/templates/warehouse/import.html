<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}"
      lang="vi">
<head>
    <title>Nh·∫≠p Kho</title>
</head>
<body> <div layout:fragment="content">
    <div class="container mt-5">
        <h2 class="text-center mb-4">üì¶ Qu·∫£n L√Ω Nh·∫≠p Kho</h2>

        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <form th:action="@{/warehouse}" method="post" class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label fw-bold">S·∫£n ph·∫©m</label>
                        <select name="productId" class="form-select" required>
                            <option value="">-- Ch·ªçn s·∫£n ph·∫©m --</option>
                            <option th:each="sp : ${products}" th:value="${sp.id}" th:text="${sp.name}"></option>
                        </select>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label fw-bold">K√≠ch th∆∞·ªõc</label>
                        <select name="sizeId" class="form-select" required>
                            <option value="">-- Ch·ªçn size --</option>
                            <option th:each="s : ${sizes}" th:value="${s.id}" th:text="${s.name}"></option>
                        </select>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label fw-bold">M√†u s·∫Øc</label>
                        <select name="colorId" class="form-select" required>
                            <option value="">-- Ch·ªçn m√†u --</option>
                            <option th:each="c : ${colors}" th:value="${c.id}" th:text="${c.name}"></option>
                        </select>
                    </div>

                    <div class="col-md-2">
                        <label class="form-label fw-bold">S·ªë l∆∞·ª£ng</label>
                        <input type="number" name="quantity" min="1" class="form-control" required>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label fw-bold">ƒê∆°n gi√° nh·∫≠p</label>
                        <input type="number" name="price" step="1000" min="0" class="form-control" required>
                    </div>

                    <div class="col-12 text-end mt-3">
                        <button type="submit" class="btn btn-primary px-4">Nh·∫≠p Kho</button>
                    </div>
                </form>

                <div th:if="${successMessage}" class="alert alert-success mt-3 text-center" th:text="${successMessage}">
                </div>
                <div th:if="${errorMessage}" class="alert alert-danger mt-3 text-center" th:text="${errorMessage}">
                </div>
            </div>
        </div>

        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white fw-bold">
                Danh S√°ch Phi·∫øu Nh·∫≠p Kho G·∫ßn ƒê√¢y
            </div>
            <div class="card-body p-0">
                <table class="table table-striped table-hover mb-0">
                    <thead class="table-light">
                    <tr class="text-center">
                        <th>#</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>M√†u</th>
                        <th>Size</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>ƒê∆°n gi√°</th>
                        <th>Ng√†y nh·∫≠p</th>
                        <th>Nh√¢n vi√™n</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="nk, st : ${warehouseList}" class="text-center">
                        <td th:text="${st.index + 1}"></td>
                        <td th:text="${nk.productVariant?.product?.name}"></td> <td th:text="${nk.productVariant?.color?.name}"></td>
                        <td th:text="${nk.productVariant?.size?.name}"></td>
                        <td th:text="${nk.quantity}"></td>
                        <td th:text="${#numbers.formatDecimal(nk.price, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                        <td th:text="${#dates.format(nk.importDate, 'dd/MM/yyyy')}"></td>
                        <td th:text="${nk.staff?.fullName}"></td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(warehouseList)}">
                        <td colspan="8" class="text-center text-muted py-3">Ch∆∞a c√≥ phi·∫øu nh·∫≠p n√†o</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
</html>